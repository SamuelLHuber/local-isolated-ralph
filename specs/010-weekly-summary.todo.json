{
  "v": 1,
  "id": "010-weekly-summary",
  "tdd": true,
  "dod": [
    "bun test",
    "bun run typecheck"
  ],
  "tasks": [
    {
      "id": "010-weekly-summary-1",
      "do": "Add tests for weekly scheduler default (Sunday 18:00 Europe/Berlin) and per-repo override behavior.",
      "verify": "bun test -- scheduler tests fail before implementation."
    },
    {
      "id": "010-weekly-summary-2",
      "do": "Implement weekly scheduler config and per-repo schedule overrides.",
      "verify": "bun test -- scheduler tests pass."
    },
    {
      "id": "010-weekly-summary-3",
      "do": "Add tests for GitHub API data fetch: merged PRs, commits, and file change paths.",
      "verify": "bun test -- GitHub fetch tests fail before implementation."
    },
    {
      "id": "010-weekly-summary-4",
      "do": "Implement GitHub API data collection for the weekly window (Mon-Sun) with required fields.",
      "verify": "bun test -- GitHub fetch tests pass."
    },
    {
      "id": "010-weekly-summary-5",
      "do": "Add tests for summary JSON shape including highlights, sources, and review metadata.",
      "verify": "bun test -- summary shape tests fail before implementation."
    },
    {
      "id": "010-weekly-summary-6",
      "do": "Implement summary generation via @effect/ai using per-repo prompt merged with base prompt.",
      "verify": "bun test -- summary generation tests pass."
    },
    {
      "id": "010-weekly-summary-7",
      "do": "Add tests for reviewer loop (5 reviewers, 4 approvals, max 3 iterations).",
      "verify": "bun test -- reviewer loop tests fail before implementation."
    },
    {
      "id": "010-weekly-summary-8",
      "do": "Implement reviewer loop with iteration cap and approval threshold.",
      "verify": "bun test -- reviewer loop tests pass."
    },
    {
      "id": "010-weekly-summary-9",
      "do": "Add tests for observability: logs and traces for fetch, generation, and review loop.",
      "verify": "bun test -- observability tests fail before implementation."
    },
    {
      "id": "010-weekly-summary-10",
      "do": "Implement logging and tracing hooks for weekly summary pipeline steps.",
      "verify": "bun test -- observability tests pass."
    }
  ]
}
