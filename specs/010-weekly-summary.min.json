{"v":1,"id":"010-weekly-summary","title":"Weekly Repository Summary","status":"Proposed","version":"1.0","lastUpdated":"2026-02-02","supersedes":[],"dependsOn":["000-base"],"goals":["Generate a weekly summary per repo from GitHub API data only (no local clones).","Highlight new features, learning insights, improvements, and docs/spec changes.","Support per-repo prompts to steer the AI while keeping a common output template.","Use an AI reviewer loop until 4/5 reviewers agree the summary is complete."],"nonGoals":["No domain-specific persistence beyond the run store.","No notifications or UI delivery in this phase.","No real-time PR monitoring (weekly only)."],"req":{"api":["GitHub API access is required; no local clones are used.","Per-repo configuration is managed via API in v1 (schedule, prompt, watch_paths, recipients)."],"behavior":["Weekly cadence defaults to Sunday 18:00 Europe/Berlin and is configurable per repo.","Weekly window is the current calendar week (Mon-Sun) in Europe/Berlin time.","Data sources include merged PRs, commits, and file change paths for docs/spec/TODO detection.","Output JSON conforms to the specified summary schema and includes sources and review metadata.","Use @effect/ai with OpenAI provider and a reviewer loop (5 reviewers, 4 approvals, max 3 iterations).","Prompts are configurable per repo and merged with a global base prompt and output schema."],"obs":["Emit logs and traces for GitHub fetch, AI generation, and reviewer loop."]},"cfg":{"env":["SUMMARY_TIMEZONE (default: Europe/Berlin)","SUMMARY_LOOKBACK_DAYS (default: 7)","REVIEWERS (default: 5)","REVIEW_APPROVALS_REQUIRED (default: 4)","REVIEW_MAX_ITERATIONS (default: 3)","GITHUB_TOKEN (required)"]},"accept":["For each configured repo, a weekly summary job runs at the configured time.","Output JSON includes all required sections and source metadata.","Reviewer loop completes with 4/5 approvals or hits max iterations.","Observability: logs and traces for GitHub fetch, AI generation, reviewer loop."],"assume":["Weekly window is calendar week (Mon-Sun) in Europe/Berlin time.","PR review comments are included in the analysis.","Prompts live in config with per-repo overrides allowed.","Docs/spec highlight detection relies on path rules (docs/, spec/, prd/, TODO.md).","Truncation rules for very large PRs/commit diffs will be added if needed.","Reviewer minimum quality: no empty sections, at least one item in new_features or improvements when changes exist, and sources referenced.","The job runs Sunday 18:00 local time and summarizes the current week from Monday 00:00 through the run time."]}